<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>L.U.N.A. - AI 코딩 튜터</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./assets/css/style.css?v=20251212" />
  <style>
    .glass-card {
      background: rgba(15, 18, 25, 0.9);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(100, 116, 139, 0.2);
    }
    .input-field {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid rgba(100, 116, 139, 0.3);
      transition: all 0.2s;
    }
    .input-field:focus {
      outline: none;
      border-color: #06b6d4;
      box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.2);
    }
    .btn-primary {
      background: linear-gradient(135deg, #06b6d4, #3b82f6);
      transition: all 0.2s;
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, #22d3ee, #60a5fa);
      transform: translateY(-1px);
    }
    .btn-secondary {
      background: rgba(51, 65, 85, 0.6);
      border: 1px solid rgba(100, 116, 139, 0.3);
      transition: all 0.2s;
    }
    .btn-secondary:hover {
      background: rgba(71, 85, 105, 0.6);
    }
    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #fca5a5;
    }
    .success-message {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: #86efac;
    }
    .warning-message {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.3);
      color: #fcd34d;
    }
  </style>
</head>
<body class="bg-[#0B0E14] text-slate-200 min-h-screen flex flex-col font-sans">

  <!-- 배경 효과 -->
  <div class="fixed inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500 rounded-full blur-[150px] opacity-10"></div>
    <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-indigo-500 rounded-full blur-[150px] opacity-10"></div>
  </div>

  <!-- 헤더 -->
  <header class="flex items-center justify-center px-5 py-4 bg-[#0f1219]/80 border-b border-slate-800 shrink-0 z-20">
    <!-- L.U.N.A. Brand Identity Block (Centered) -->
    <a href="index.html" class="flex items-center gap-3 select-none cursor-pointer group">
      <!-- 1. The Neural Core Icon (Refined & Balanced) -->
      <div class="relative w-11 h-11 flex items-center justify-center">
        <!-- Ambient Background Glow -->
        <div class="absolute inset-0 bg-cyan-500/20 blur-xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
        <!-- Orbit Ring 1 (Solid, Slow Rotate) -->
        <div class="absolute inset-0 rounded-full border border-cyan-500/30 group-hover:border-cyan-400/60 transition-colors duration-500 animate-[spin_10s_linear_infinite]"></div>
        <!-- Orbit Ring 2 (Dashed, Counter Rotate) -->
        <div class="absolute w-[130%] h-[130%] rounded-full border border-dashed border-cyan-500/10 animate-[spin_20s_linear_infinite_reverse]"></div>
        <!-- Orbiting Electron (Fast Spin) -->
        <div class="absolute w-full h-full animate-[spin_3s_linear_infinite] group-hover:animate-[spin_1.5s_linear_infinite]">
          <div class="w-1.5 h-1.5 bg-cyan-300 rounded-full absolute -top-0.5 left-1/2 -translate-x-1/2 shadow-[0_0_10px_#22d3ee]"></div>
        </div>
        <!-- Inner Core (Floating & Breathing) -->
        <div class="relative w-5 h-5 rounded-full bg-gradient-to-tr from-cyan-600 to-cyan-300 shadow-lg shadow-cyan-500/30 z-10 group-hover:scale-110 group-hover:shadow-cyan-400/60 transition-all duration-500 animate-[float_3s_ease-in-out_infinite]">
          <div class="absolute inset-0 bg-white/40 rounded-full animate-pulse"></div>
        </div>
      </div>
      <!-- 2. Typography Lockup (Visual Balance Logic) -->
      <div class="flex flex-col justify-center h-full">
        <!-- Main Logo Type -->
        <h1 class="text-2xl font-bold leading-none tracking-[0.2em] -mr-[0.2em]" style="font-family: 'Space Mono', monospace;">
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-100 via-white to-cyan-400 group-hover:from-white group-hover:to-cyan-300 transition-all duration-300">LUNA</span>
        </h1>
        <!-- Decorative Divider Line (Expands on hover) -->
        <div class="w-full h-px bg-gradient-to-r from-cyan-500/50 via-cyan-500/20 to-transparent my-1 origin-left scale-x-50 group-hover:scale-x-100 transition-transform duration-500 ease-out"></div>
        <!-- Full Name Subtext -->
        <span class="text-[9px] text-cyan-500/60 tracking-[0.12em] font-medium leading-none uppercase group-hover:text-cyan-400 transition-colors duration-300 whitespace-nowrap" style="font-family: 'JetBrains Mono', monospace;">
          Logic Unified Neural Advisor
        </span>
      </div>
    </a>
  </header>

  <!-- 메인 컨텐츠 -->
  <main class="flex-grow flex items-center justify-center p-6 relative z-10">
    <div class="glass-card rounded-2xl p-8 w-full max-w-md shadow-2xl">
      
      <!-- 탭 헤더 -->
      <div class="flex mb-8 border-b border-slate-700">
        <button id="login-tab" class="flex-1 py-3 text-center font-medium transition-all border-b-2 border-cyan-500 text-cyan-400">
          <i class="fas fa-sign-in-alt mr-2"></i>로그인
        </button>
        <button id="register-tab" class="flex-1 py-3 text-center font-medium transition-all border-b-2 border-transparent text-slate-400 hover:text-slate-300">
          <i class="fas fa-user-plus mr-2"></i>회원가입
        </button>
      </div>

      <!-- 알림 메시지 영역 -->
      <div id="message-container" class="hidden mb-4 p-3 rounded-lg text-sm"></div>

      <!-- 로그인 폼 -->
      <form id="login-form" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-slate-400 mb-2">
            <i class="fas fa-user mr-1"></i>ID
          </label>
          <input type="text" id="login-username" required
                 class="input-field w-full px-4 py-3 rounded-lg text-white placeholder-slate-500"
                 placeholder="ID를 입력하세요" />
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-400 mb-2">
            <i class="fas fa-lock mr-1"></i>비밀번호
          </label>
          <input type="password" id="login-password" required
                 class="input-field w-full px-4 py-3 rounded-lg text-white placeholder-slate-500"
                 placeholder="비밀번호를 입력하세요" />
        </div>
        <button type="submit" class="btn-primary w-full py-3 rounded-lg font-medium text-white shadow-lg shadow-cyan-500/20">
          <i class="fas fa-arrow-right mr-2"></i>로그인
        </button>
      </form>

      <!-- 회원가입 폼 (숨김) -->
      <form id="register-form" class="space-y-4 hidden">
        <div>
          <label class="block text-sm font-medium text-slate-400 mb-2">
            <i class="fas fa-user mr-1"></i>ID
          </label>
          <input type="text" id="register-username" required
                 class="input-field w-full px-4 py-3 rounded-lg text-white placeholder-slate-500"
                 placeholder="사용할 ID를 입력하세요" />
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium text-slate-400 mb-2">
              <i class="fas fa-id-badge mr-1"></i>직번
            </label>
            <input type="text" id="register-employee-number" required
                   class="input-field w-full px-4 py-3 rounded-lg text-white placeholder-slate-500"
                   placeholder="직번 (6자리)" maxlength="6" />
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-400 mb-2">
              <i class="fas fa-signature mr-1"></i>성명
            </label>
            <input type="text" id="register-name" required
                   class="input-field w-full px-4 py-3 rounded-lg text-white placeholder-slate-500"
                   placeholder="실명을 입력하세요" />
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-400 mb-2">
            <i class="fas fa-lock mr-1"></i>비밀번호
          </label>
          <input type="password" id="register-password" required minlength="4"
                 class="input-field w-full px-4 py-3 rounded-lg text-white placeholder-slate-500"
                 placeholder="비밀번호 (4자 이상)" />
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-400 mb-2">
            <i class="fas fa-lock mr-1"></i>비밀번호 확인
          </label>
          <input type="password" id="register-password-confirm" required minlength="4"
                 class="input-field w-full px-4 py-3 rounded-lg text-white placeholder-slate-500"
                 placeholder="비밀번호를 다시 입력하세요" />
        </div>
        
        <!-- 이용약관 동의 체크박스 -->
        <div class="flex items-center gap-2 pt-2">
          <input type="checkbox" id="agree-terms" disabled
                 class="w-4 h-4 rounded border-slate-600 bg-slate-700 text-cyan-500 focus:ring-cyan-500 focus:ring-offset-slate-900 cursor-not-allowed opacity-60">
          <label for="agree-terms" class="text-xs text-slate-400 select-none">
            <span id="terms-label-text">서비스 이용약관에 동의가 필요합니다.</span>
            <button type="button" id="show-terms-btn" class="text-cyan-400 hover:text-cyan-300 underline underline-offset-2 ml-1 font-medium">약관 읽기</button>
          </label>
        </div>
        
        <button type="submit" class="btn-primary w-full py-3 rounded-lg font-medium text-white shadow-lg shadow-cyan-500/20">
          <i class="fas fa-user-plus mr-2"></i>회원가입
        </button>
        <p class="text-xs text-slate-500 text-center mt-2">
          <i class="fas fa-info-circle mr-1"></i>회원가입 후 관리자 승인이 필요합니다.
        </p>
      </form>

      <!-- 관리자 페이지 링크 -->
      <div id="admin-link-container" class="hidden mt-6 pt-4 border-t border-slate-700 text-center">
        <a href="admin.html" class="text-sm text-cyan-400 hover:text-cyan-300 transition-colors">
          <i class="fas fa-cog mr-1"></i>관리자 페이지
        </a>
      </div>
    </div>
  </main>

  <!-- 푸터 -->
  <footer class="text-center py-4 text-xs text-slate-500 bg-[#0f1219]/50 border-t border-slate-800 relative z-10">
    © 2025 <strong class="text-slate-400">Dream of ENC</strong>, Seyoong Jang. All Rights Reserved.
  </footer>

  <!-- 이용약관 모달 -->
  <div id="terms-modal" class="hidden fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
    <div class="bg-[#1e293b] border border-slate-700 rounded-2xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col overflow-hidden transform scale-95 transition-transform duration-300">
      
      <!-- 헤더 -->
      <div class="px-6 py-4 border-b border-slate-700 bg-gradient-to-r from-slate-800 to-slate-900 flex justify-between items-center">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 rounded-lg bg-cyan-900/50 flex items-center justify-center text-cyan-400">
            <i class="fas fa-shield-alt"></i>
          </div>
          <h3 class="text-lg font-bold text-white">서비스 이용약관</h3>
        </div>
        <button type="button" id="close-terms-btn" class="text-slate-400 hover:text-white transition-colors">
          <i class="fas fa-times text-lg"></i>
        </button>
      </div>

      <!-- 내용 -->
      <div class="flex-1 overflow-y-auto p-6 space-y-6 text-sm text-slate-300 leading-relaxed scrollbar-thin">
        
        <div>
          <h4 class="text-cyan-400 font-bold mb-2 flex items-center gap-2">
            <i class="fas fa-bullseye"></i> 1. 서비스 목적 및 비영리 원칙
          </h4>
          <p class="bg-slate-800/50 p-3 rounded-lg border border-slate-700/50">
            본 서비스 <strong class="text-white">'AI Coding Tutor'</strong>는 SW 교육 및 개인 학습 보조를 위해 제작되었습니다.<br>
            <span class="text-amber-400">모든 콘텐츠는 비영리 목적으로만 제공</span>되며, 상업적 용도의 재배포나 판매를 엄격히 금지합니다.
          </p>
        </div>

        <div>
          <h4 class="text-purple-400 font-bold mb-2 flex items-center gap-2">
            <i class="fas fa-copyright"></i> 2. 지식재산권 귀속
          </h4>
          <ul class="list-disc pl-5 space-y-1 text-slate-400">
            <li>본 서비스의 기획, 소스 코드, UI 디자인 및 AI 페르소나('루나')에 대한 모든 권리는 <strong class="text-white">Dream of ENC (Seyoong Jang)</strong>에게 있습니다.</li>
            <li>무단 복제, 리버스 엔지니어링, 소스 코드 도용 시 법적 책임을 물을 수 있습니다.</li>
          </ul>
        </div>

        <div>
          <h4 class="text-emerald-400 font-bold mb-2 flex items-center gap-2">
            <i class="fas fa-robot"></i> 3. AI 생성 콘텐츠 면책
          </h4>
          <p>
            본 서비스는 Google Gemini API를 활용합니다. AI가 생성한 코드나 설명의 정확성을 100% 보장하지 않으며, 이를 실무에 적용하여 발생한 문제에 대해 운영자는 책임을 지지 않습니다.
          </p>
        </div>

        <div>
          <h4 class="text-blue-400 font-bold mb-2 flex items-center gap-2">
            <i class="fas fa-user-lock"></i> 4. 개인정보 수집 및 이용
          </h4>
          <p>
            원활한 학습 이력 관리(커리큘럼 저장, XP 등)를 위해 최소한의 정보(아이디, 학습 로그)만 수집하며, 학습 목적 외의 용도로 사용하지 않습니다.
          </p>
        </div>

      </div>

      <!-- 푸터 -->
      <div class="px-6 py-4 border-t border-slate-700 bg-slate-900 flex justify-end">
        <button type="button" id="agree-close-btn" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg transition-colors shadow-lg shadow-cyan-500/20">
          위 내용을 확인하였으며 동의합니다
        </button>
      </div>
    </div>
  </div>

  <!-- ES6 모듈로 config.js 사용 -->
  <script type="module">
    // config.js에서 API 설정 가져오기
    import { API_BASE, FETCH_OPTIONS, postJSON, getJSON } from './assets/js/config.js?v=20251212';
    
    console.log('[API] API_BASE:', API_BASE);

    // DOM 요소
    const loginTab = document.getElementById('login-tab');
    const registerTab = document.getElementById('register-tab');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const messageContainer = document.getElementById('message-container');
    const adminLinkContainer = document.getElementById('admin-link-container');

    // 탭 전환
    loginTab.addEventListener('click', () => {
      loginTab.classList.add('border-cyan-500', 'text-cyan-400');
      loginTab.classList.remove('border-transparent', 'text-slate-400');
      registerTab.classList.remove('border-cyan-500', 'text-cyan-400');
      registerTab.classList.add('border-transparent', 'text-slate-400');
      loginForm.classList.remove('hidden');
      registerForm.classList.add('hidden');
      hideMessage();
    });

    registerTab.addEventListener('click', () => {
      registerTab.classList.add('border-cyan-500', 'text-cyan-400');
      registerTab.classList.remove('border-transparent', 'text-slate-400');
      loginTab.classList.remove('border-cyan-500', 'text-cyan-400');
      loginTab.classList.add('border-transparent', 'text-slate-400');
      registerForm.classList.remove('hidden');
      loginForm.classList.add('hidden');
      hideMessage();
    });

    // 메시지 표시
    function showMessage(text, type = 'error') {
      messageContainer.textContent = text;
      messageContainer.classList.remove('hidden', 'error-message', 'success-message', 'warning-message');
      messageContainer.classList.add(`${type}-message`);
    }

    function hideMessage() {
      messageContainer.classList.add('hidden');
    }

    // 버튼 로딩 상태 관리
    function setButtonLoading(button, isLoading) {
      if (isLoading) {
        button.disabled = true;
        button.dataset.originalHtml = button.innerHTML;
        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>처리 중...';
        button.classList.add('opacity-70', 'cursor-not-allowed');
      } else {
        button.disabled = false;
        button.innerHTML = button.dataset.originalHtml || button.innerHTML;
        button.classList.remove('opacity-70', 'cursor-not-allowed');
      }
    }

    // 로그인 처리
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const username = document.getElementById('login-username').value.trim();
      const password = document.getElementById('login-password').value;
      const submitBtn = loginForm.querySelector('button[type="submit"]');

      setButtonLoading(submitBtn, true);
      hideMessage();

      try {
        const data = await postJSON('/login', { username, password });

        if (data.error) {
          showMessage(data.error, 'error');
          setButtonLoading(submitBtn, false);
          return;
        }

        // 로그인 성공
        if (!data.user.is_approved) {
          showMessage('관리자 승인 대기 중입니다. 승인 후 이용 가능합니다.', 'warning');
          setButtonLoading(submitBtn, false);
          return;
        }

        // ✅ localStorage에 username 저장 (학습 데이터 연동용)
        localStorage.setItem('coding_tutor_user_id', username);
        console.log('[LOGIN] username 저장:', username);

        showMessage('로그인 성공! 메인 페이지로 이동합니다.', 'success');
        setTimeout(() => {
          window.location.href = 'index.html';
        }, 1000);

      } catch (err) {
        showMessage('서버와 연결할 수 없습니다. 네트워크를 확인해주세요.', 'error');
        setButtonLoading(submitBtn, false);
        console.error('[LOGIN ERROR]', err);
      }
    });

    // 회원가입 처리
    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const submitBtn = registerForm.querySelector('button[type="submit"]');
      
      // 약관 동의 체크
      const agreeCheckbox = document.getElementById('agree-terms');
      if (!agreeCheckbox.checked) {
        const label = document.querySelector('label[for="agree-terms"]');
        label.classList.add('text-red-400');
        setTimeout(() => label.classList.remove('text-red-400'), 800);
        showMessage('서비스 이용약관에 동의해주세요.', 'error');
        return;
      }
      
      const username = document.getElementById('register-username').value.trim();
      const employeeNumber = document.getElementById('register-employee-number').value.trim();
      const name = document.getElementById('register-name').value.trim();
      const password = document.getElementById('register-password').value;
      const passwordConfirm = document.getElementById('register-password-confirm').value;

      // 직번 유효성 검사
      if (!/^\d{6}$/.test(employeeNumber)) {
        showMessage('직번은 6자리 숫자여야 합니다.', 'error');
        return;
      }

      // 성명 유효성 검사
      if (name.length < 2) {
        showMessage('성명을 올바르게 입력해주세요.', 'error');
        return;
      }

      if (password !== passwordConfirm) {
        showMessage('비밀번호가 일치하지 않습니다.', 'error');
        return;
      }

      setButtonLoading(submitBtn, true);
      hideMessage();

      try {
        const data = await postJSON('/register', { 
          username, 
          password,
          employee_number: employeeNumber,
          name: name
        });

        if (data.error) {
          showMessage(data.error, 'error');
          setButtonLoading(submitBtn, false);
          return;
        }

        // 회원가입 성공
        if (data.is_approved) {
          showMessage(data.message + ' 로그인해주세요.', 'success');
        } else {
          showMessage(data.message, 'success');
        }

        setButtonLoading(submitBtn, false);
        // 회원가입 폼 초기화 후 로그인 탭으로 전환
        registerForm.reset();
        setTimeout(() => {
          loginTab.click();
        }, 2000);

      } catch (err) {
        showMessage('서버와 연결할 수 없습니다. 네트워크를 확인해주세요.', 'error');
        setButtonLoading(submitBtn, false);
        console.error('[REGISTER ERROR]', err);
      }
    });

    // 페이지 로드 시 인증 상태 확인
    async function checkAuthOnLoad() {
      try {
        const response = await fetch(`${API_BASE}/check_auth`, {
          ...FETCH_OPTIONS
        });
        const data = await response.json();

        if (data.authenticated) {
          if (data.user.is_approved) {
            // [수정] redirect 파라미터가 있을 때만 자동 이동 (무한 루프 방지)
            const urlParams = new URLSearchParams(window.location.search);
            const redirect = urlParams.get('redirect');
            
            if (redirect) {
              console.log('[LOGIN] 이미 로그인됨, redirect 파라미터에 따라 이동:', redirect);
              window.location.href = redirect;
            } else {
              console.log('[LOGIN] 이미 로그인됨 (자동 리다이렉트 없음)');
              showMessage('이미 로그인된 상태입니다. 원하시는 페이지로 이동하세요.', 'success');
            }
          } else {
            // 로그인은 되었지만 승인 대기 중
            showMessage('관리자 승인 대기 중입니다. 승인 후 이용 가능합니다.', 'warning');
          }

          // 관리자면 관리자 링크 표시
          if (data.user.is_admin) {
            adminLinkContainer.classList.remove('hidden');
          }
        }
      } catch (err) {
        console.log('인증 상태 확인 실패:', err);
      }
    }

    checkAuthOnLoad();

    // ========== [신규] 이용약관 모달 제어 ==========
    const termsModal = document.getElementById('terms-modal');
    const showTermsBtn = document.getElementById('show-terms-btn');
    const closeTermsBtn = document.getElementById('close-terms-btn');
    const agreeCloseBtn = document.getElementById('agree-close-btn');
    const agreeCheckbox = document.getElementById('agree-terms');
    const termsLabelText = document.getElementById('terms-label-text');

    function openTermsModal() {
      termsModal.classList.remove('hidden');
      // 약간의 딜레이 후 애니메이션 적용
      setTimeout(() => {
        termsModal.classList.remove('opacity-0');
        termsModal.querySelector('div').classList.remove('scale-95');
        termsModal.querySelector('div').classList.add('scale-100');
      }, 10);
    }

    function closeTermsModal() {
      termsModal.classList.add('opacity-0');
      termsModal.querySelector('div').classList.remove('scale-100');
      termsModal.querySelector('div').classList.add('scale-95');
      setTimeout(() => {
        termsModal.classList.add('hidden');
      }, 300);
    }

    showTermsBtn.addEventListener('click', (e) => {
      e.preventDefault(); // 폼 전송 방지
      openTermsModal();
    });

    closeTermsBtn.addEventListener('click', closeTermsModal);

    // "동의합니다" 버튼 클릭 시 -> 체크박스 활성화 및 체크 후 닫기
    agreeCloseBtn.addEventListener('click', () => {
      agreeCheckbox.disabled = false;
      agreeCheckbox.checked = true;
      agreeCheckbox.classList.remove('cursor-not-allowed', 'opacity-60');
      agreeCheckbox.classList.add('cursor-pointer');
      
      // 라벨 텍스트 업데이트
      termsLabelText.textContent = '서비스 이용약관에 동의하였습니다.';
      termsLabelText.classList.add('text-emerald-400');
      termsLabelText.classList.remove('text-slate-400');
      
      // 버튼 텍스트 변경
      showTermsBtn.textContent = '다시 보기';
      
      closeTermsModal();
    });

    // 모달 외부 클릭 시 닫기
    termsModal.addEventListener('click', (e) => {
      if (e.target === termsModal) {
        closeTermsModal();
      }
    });
  </script>
</body>
</html>
